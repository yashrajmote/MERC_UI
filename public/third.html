!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="icon" href="images/abhitech-mahagenco-combined-logo.png" type="image/png">
    <title>Output - Mahagenco</title>
</head>
<body class="bg-gray-100">
    <div class="max-h-screen flex flex-col">
        <nav class="fixed top-0 left-0 w-full z-50 bg-white shadow h-20">
            <div class="mb-4 flex w-full h-3 bg-white-50">
                <img src="images/abhitech-mahagenco-combined-logo.png" alt="Logo" class="h-20 ">
            </div>
            <div id="selectedLabel" class="flex justify-center text-2xl font-bold text-gray-700">
            </div>
            <div class="fixed top-7 right-4">
                <button onclick="window.location.href='output.html'" >
                    <img src="images/icons8-back-48.png" alt="Back" class="h-9 w-9 mr-2">
                </button>
            </div>
        </nav>
        <main class="flex h-screen bg-gra p-3 overflow-y-auto">

            <section class="mt-10 grid w-4/6 justify-center">
                <div class="bg-gray-100 rounded-lg shadow-inner text-gray-700 leading-6">
                    <!-- Row -->
                    <div class="p-4 rounded-lg shadow-lg">
                        <div id="" class="  overflow-x-auto w-full max-w-4xl">
                            <div class=" overflow-x-auto">
                                <div class="min-w-full inline-block align-middle">
                                    <div class="overflow-hidden border rounded-lg border-gray-300">
                                        <table class=" min-w-full  rounded-xl">
                                            <thead class="border border-gray-300 px-1 py-1" id="insightTable">
                                                <tr class="">
                                                    <th scope="col" class="border border-gray-300 p-5 text-left px-1 py-1 text-sm leading-6 font-semibold text-gray-900 capitalize"> Failure Modes </th>
                                                    <th scope="col " class="p-5 border border-gray-300 px-1 py-1 bg-gray-50 text-left text-sm leading-6 font-semibold text-gray-900 capitalize"> Source Sheet </th>
                                                    <th scope="col" class="p-5 text-left text-sm leading-6 font-semibold text-gray-900 capitalize"> Action Plan </th>
                                                </tr>
                                            </thead>
                                            <tbody id="insightTableBody">
                                                
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                             </div>
                        </div>
                    </div>
                
                </div>
            </section>
            <section class="mt-10 w-8/14 gap-1 p-4">

                <section class="mt-1 gap-1">
                    <div class=" bg-white shadow-md rounded-lg p-2">
                        <h2 id="chartTitle" class="text-lg leading-tight text-center font-semibold text-gray-800 mb-1"></h2>
                        <canvas id="dynamicIncentives" width="400" height="95"></canvas>
                    </div>
                </section>

        </main>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
        const storedData = localStorage.getItem('insightData');
        console.log(storedData);
        if (storedData) {
            const parsedData = JSON.parse(storedData);
            
            populateTable([parsedData]);
        }
    });

        function populateTable(data) {
            const tableBody = document.querySelector('#insightTableBody');
    
            data.forEach(item => {
                item.data.forEach(mode => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${mode.mode}</td>
                        <td>${mode.sourceSheet}</td>
                        <td>
                            <ul>
                                ${mode.actionPlan.map(action => `<li>${action}</li>`).join('')}
                            </ul>
                        </td>
                    `;
    
                    tableBody.appendChild(row);
                });
            });
        }
    </script>
    <script src="js/scripts.js"></script>

    </body>
    </html>
        