<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="icon" href="images/abhitech-mahagenco-combined-logo.png" type="image/png">
    <title>Output - Mahagenco</title>
</head>
<body class="bg-gray-100">
    <div class="max-h-screen flex flex-col">
        <nav class="fixed top-0 left-0 w-full z-50 bg-white shadow h-20">
            <div class="mb-4 flex w-full h-3 bg-white-50">
                <img src="images/abhitech-mahagenco-combined-logo.png" alt="Logo" class="h-20 ">
            </div>
            <div id="selectedLabel" class="flex justify-center text-2xl font-bold text-gray-700">
            </div>
            <div class="fixed top-7 right-4">
                <button onclick="window.location.href='index.html'" >
                    <img src="images/icons8-back-48.png" alt="Back" class="h-9 w-9 mr-2">
                </button>
            </div>
        </nav>
        <main class="content mt-16 overflow-y-auto h-[calc(100vh-4rem)] p-4 flex">
            <section class="mt-1 w-1/2 ">
                <div class=" grid grid-rows-2 bg-gray-100 rounded-lg shadow-inner text-gray-700 leading-6">
                    <!-- Row -->
                    <div class="p-4 rounded-lg shadow-lg">
                        <div id="gain-loss-report" class="h-full onlyrelative overflow-x-auto w-full max-w-4xl">
                        </div>
                    </div>
                    <!-- Row -->
                    <div class="p-4 rounded-lg shadow-lg">
                        <div id="incentive-gains-report" class="h-full relative overflow-x-auto w-full max-w-4xl">
                        </div>
                    </div>
                    <div class="mt-1 p-4 rounded-lg shadow-lg bg-white h-full flex flex-col">
                        <h2 class="text-lg font-semibold text-gray-800 mb-2 self-start">Incentives</h2>
                        <div class="flex-grow flex items-center justify-center">
                        <canvas id="chart6"></canvas>
                        </div>
                    </div>
                </div>
            </section>
            
            <section class="w-7/12 grid grid-rows-3 gap-1">

                <section class="mt-1 grid grid-rows-1 gap-1">
                    <div class="justify-right h-50  bg-white shadow-md rounded-lg ">
                        <h2 class="text-lg pl-4 font-semibold mb-2">GAIN/LOSS Report (in Cr.)</h2>
                        <canvas id="chart7" width="430" height="83"></canvas>
                    </div>
                </section>

                <div id="reportContainer" class="grid grid-cols-2"> 
                    <!-- Report Output Container -->
                            <div class="h-48 bg-white shadow-md rounded-lg p-2">
                                <h2 class="text-lg leading-tight text-center font-semibold text-gray-800 mb-1">Availability Factor</h2>
                                <canvas id="chart1" width="400" height="95"></canvas>
                            </div>
                            <div class="h-48 bg-white shadow-md rounded-lg p-2">
                                <h2 class="text-lg  leading-tight text-center font-semibold text-gray-800 mb-1">Heat Rate</h2>
                                <canvas id="chart2" width="400" height="95"></canvas>
                            </div>
                            <div class="mt-1 h-48 bg-white shadow-md rounded-lg p-2">
                                <h2 class="text-lg leading-tight text-center font-semibold text-gray-800 mb-1">Auxiliary Power Consumption</h2>
                                <canvas id="chart3" width="400" height="95"></canvas>
                            </div>
                            <div class="mt-1 h-48 bg-white shadow-md rounded-lg p-2">
                                <h2 class="text-lg leading-tight text-center font-semibold text-gray-800 mb-1">Specific Oil Consumption</h2>
                                <canvas id="chart4" width="400" height="95"></canvas>
                            </div>
                            <div class="mt-1 h-48 bg-white shadow-md rounded-lg p-2">
                                <h2 class="text-lg leading-tight text-center font-semibold text-gray-800 mb-1">Transit Loss</h2>
                                <canvas id="chart5" width="400" height="95"></canvas>
                            </div>
                    </div>      
                    </section>          
        </main>
    </div>
    </div>
    <script src="js/scripts.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        
document.addEventListener('DOMContentLoaded', function() {

    // Retrieve the stored data from localStorage
    const reportData = JSON.parse(localStorage.getItem('reportData'));
    const selectedLabel = JSON.parse(localStorage.getItem('selectedLabel'));
    console.log(selectedLabel)

    const selects = document.querySelectorAll('select');
    selects.forEach(select => {
        
    })
    if (selectedLabel) {
        document.getElementById('selectedLabel').textContent = selectedLabel;
    }
    
    if (reportData) {
        generateReport(
            reportData.gainValues,
            reportData.afterCalculations,
            reportData.ROEValues,
            reportData.parsedValues
        );
    }

    console.log(reportData);

});

    </script>
</body>
</html>
